import{g as S,u as $,v as A,w as H,b as L,x as R,y as U,A as j,a as f}from"./element-plus.js";import{u as q}from"./vue-router.js";import{v as z,H as F,F as I,B as K}from"./@element-plus.js";import{l as O,D as P,r as Q}from"./dialog.js";import{g as W}from"./index.js";import{r as d,W as G,w as J,n as X,c as Y,o as g,O as t,a as Z,L as n,a3 as b,Q as ee,K as te,H as oe,u as i}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const ae={class:"bg-fff radius-6 pd-20"},le={class:"mr-10 ml-10"},Ve={__name:"index",setup(ne){const v=d([]),p=d(0),u=d(1),m=W("username"),o=G({dialogVisible:!1,id:0,params:{},list:[]}),h=q();J(()=>o.dialogVisible,e=>{e||c()});const c=async()=>{try{const e=await O();e.code===200&&(o.list=[...e.data.list],p.value=e.data.total)}catch(e){console.log(e)}},y=e=>{u.value=e,c()},w=e=>{v.value=e},C=e=>{o.id=e.id,o.dialogVisible=!0},k=()=>{o.id=0,o.dialogVisible=!0},x=e=>{let{type_code:a}=e;h.push({name:"config",params:{id:a}})},E=async e=>{j.confirm("将会删除当前类型下所有配置，确定要继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{V(e)}).catch(()=>{f({type:"info",message:"取消成功"})})},V=async e=>{try{const{id:a}=e;(await Q({id:a})).code===200&&(f.success("删除成功 ^_^"),c())}catch(a){console.log(a)}};return X(()=>{c()}),(e,a)=>{const s=S,B=$,r=A,T=L,D=H,M=R,N=U;return g(),Y("div",ae,[t(B,{type:"flex",justify:"end"},{default:n(()=>[t(s,{type:"primary",onClick:k,round:""},{default:n(()=>a[1]||(a[1]=[b("新增")])),_:1})]),_:1}),Z("div",le,[t(M,{data:o.list,"tooltip-effect":"dark","row-key":"id",onSelectionChange:w},{default:n(()=>[t(r,{prop:"id",width:"100",label:"编号"}),t(r,{prop:"type_code",label:"标识"}),t(r,{prop:"type_name",label:"名称"}),t(r,{prop:"status",label:"是否启用"},{default:n(l=>[b(ee(l.row.status==1?"启用":"关闭"),1)]),_:1}),t(r,{fixed:"right",width:"200",label:"操作"},{default:n(l=>[t(s,{icon:i(z),circle:"",onClick:_=>x(l.row)},null,8,["icon","onClick"]),t(s,{icon:i(F),circle:"",onClick:_=>C(l.row)},null,8,["icon","onClick"]),t(s,{icon:i(I),onClick:_=>E(l.row),disabled:i(m)===l.row.username,circle:""},null,8,["icon","onClick","disabled"]),i(m)===l.row.username?(g(),te(D,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:n(()=>[t(T,{class:"ml-10 t-4 pointer"},{default:n(()=>[t(i(K),{class:"c-165dff"})]),_:1})]),_:1})):oe("",!0)]),_:1})]),_:1},8,["data"]),t(N,{background:"",layout:"prev, pager, next",total:p.value,"page-size":10,"model-value":u.value,"onUpdate:modelValue":y,"hide-on-single-page":""},null,8,["total","model-value"])]),t(P,{visible:o.dialogVisible,"onUpdate:visible":a[0]||(a[0]=l=>o.dialogVisible=l),id:o.id},null,8,["visible","id"])])}}};export{Ve as default};
