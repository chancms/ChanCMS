System.register(["./element-plus-legacy.js","./@vue-legacy.js","./codefile-legacy.js","./article-legacy.js","./index-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./@element-plus-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./js-cookie-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vue-router-legacy.js","./axios-legacy.js","./nprogress-legacy.js","./@fingerprintjs-legacy.js","./tslib-legacy.js","./saduo-legacy.js"],function(a,e){"use strict";var t,l,o,i,s,n,r,d,c,u,p,g,v,f,m,h,x,y,b,k,w,j,_,z,C,M,B,$;return{setters:[a=>{t=a.a,l=a.b,o=a.y,i=a.D,s=a.S,n=a.g,r=a.Y,d=a.A},a=>{c=a.r,u=a.n,p=a.b,g=a.ai,v=a.c,f=a.o,m=a.a,h=a.G,x=a.U,y=a.H,b=a.aa,k=a.I,w=a.O,j=a.K,_=a.M,z=a.a2,C=a.J},a=>{M=a.b},a=>{B=a.d},a=>{$=a._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var e=document.createElement("style");e.textContent=".oss-manager[data-v-9066599a]{max-width:1200px;padding:16px;background:#fff;border-radius:4px}.actions[data-v-9066599a]{display:flex;gap:10px}.search-bar[data-v-9066599a]{margin-bottom:20px;display:flex;gap:10px}.image-grid[data-v-9066599a]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:20px;margin-top:20px;min-height:calc(100vh - 278px)}.image-item[data-v-9066599a]{position:relative;border-radius:6px;overflow:hidden;transition:transform .3s,box-shadow .3s;cursor:pointer;background:#f8f9fa;aspect-ratio:1/1}.image-item[data-v-9066599a]:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.1)}.folder-content[data-v-9066599a]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.folder-icon[data-v-9066599a]{font-size:32px;color:#409eff}.folder-name[data-v-9066599a]{margin-top:10px;text-align:center}.image-preview[data-v-9066599a]{width:100%;height:100%;object-fit:cover;display:block}.image-info[data-v-9066599a]{padding:10px;background:rgba(0,0,0,.7);color:#fff;position:absolute;bottom:0;left:0;right:0;transform:translateY(100%);transition:transform .3s;font-size:12px}.image-item:hover .image-info[data-v-9066599a]{transform:translateY(0)}.image-name[data-v-9066599a]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:5px}.image-size[data-v-9066599a]{font-size:12px}.image-actions[data-v-9066599a]{position:absolute;top:10px;right:10px;display:flex;gap:5px;opacity:0;transition:opacity .3s}.image-item:hover .image-actions[data-v-9066599a]{opacity:1}.action-btn[data-v-9066599a]{width:28px;height:28px;border-radius:50%;background:rgba(255,255,255,.9);display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.1);transition:background .2s}.action-btn[data-v-9066599a]:hover{background:#fff}.action-btn.delete[data-v-9066599a]:hover{background:#fef0f0;color:#f56c6c}.no-images[data-v-9066599a]{min-height:calc(100vh - 233px);text-align:center;color:#909399;font-size:12px;display:flex;flex-direction:column;align-items:center;justify-content:center}.image-dialog .el-dialog__body[data-v-9066599a]{padding:0;display:flex;justify-content:center;align-items:center;background:#000}.image-dialog img[data-v-9066599a]{max-width:100%;max-height:80vh;margin:0 auto;display:block}.image-dialog .el-dialog__header[data-v-9066599a]{background:#000;color:#fff;margin:0}.image-dialog .el-dialog__headerbtn[data-v-9066599a]{color:#fff}.image-dialog .el-dialog__headerbtn[data-v-9066599a]:hover{color:#f56c6c}.image-dialog .dialog-actions[data-v-9066599a]{position:absolute;left:0;bottom:0;padding:10px 20px;background-color:rgba(255,255,255,.7);width:100%;color:#333}.pagination[data-v-9066599a]{margin-top:30px;display:flex;justify-content:center}.upload-progress[data-v-9066599a]{position:fixed;bottom:20px;right:20px;width:300px;z-index:2000;background:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);padding:15px}.upload-item[data-v-9066599a]{display:flex;align-items:center;margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #eee}.upload-item[data-v-9066599a]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.upload-info[data-v-9066599a]{flex-grow:1;margin-left:10px}.upload-name[data-v-9066599a]{font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:5px}.upload-status[data-v-9066599a]{font-size:12px;color:#909399}.upload-success[data-v-9066599a]{color:#67c23a}.upload-error[data-v-9066599a]{color:#f56c6c}.folder-path[data-v-9066599a]{display:flex;align-items:center;margin-bottom:15px;padding:10px;background:#f5f7fa;border-radius:4px;flex-wrap:wrap}.path-item[data-v-9066599a]{cursor:pointer;user-select:none;padding:0 2px;border-radius:4px}.path-item[data-v-9066599a]:hover{background-color:#e8f4ff;color:#409eff}.path-item.current[data-v-9066599a]{color:#409eff;font-weight:500;cursor:default}.path-item.current[data-v-9066599a]:hover{background-color:transparent}.path-separator[data-v-9066599a]{margin:0 5px;color:#a6a6a6}\n/*$vite$:1*/",document.head.appendChild(e);const F={class:"oss-manager"},L={class:"header"},U={class:"folder-path"},I=["onClick"],V={key:0,class:"image-grid"},D=["onClick"],O={class:"folder-content"},P={class:"folder-name"},S=["onClick"],T=["src","alt"],Y={class:"image-info"},E={class:"image-name"},R={class:"image-size"},A={class:"image-actions"},G=["onClick"],K={key:1,class:"no-images"},H={key:2,class:"pagination"},J=["src"],q={class:"dialog-actions"},N={class:"image-size"},Q={class:"image-size"},W={class:"image-size"},X={class:"dialog-footer"},Z={key:3,class:"upload-progress"},aa={class:"upload-info"},ea={class:"upload-name"},ta={class:"upload-status"},la={key:0},oa={key:1},ia={key:2,class:"upload-success"},sa={key:3,class:"upload-error"},na={__name:"data",setup(a){const e=c(""),$=c([]),na=c(""),ra=c(""),da=c(1),ca=c(12),ua=c(!1),pa=c(null),ga=c(!1),va=c([]),fa=c(null),ma=c([]);let ha=0;u(()=>{xa()});const xa=async()=>{try{const a=await M({path:e.value});if(200===a.code){let e=a.data;e.forEach(a=>{"file"===a.type&&(a.url=`/${a.relativePath.replace(/\\/g,"/")}`)}),$.value=e,console.log("currentFolderContents:",$.value)}else t.error(`加载文件树失败: ${a.msg}`)}catch(a){console.error("加载文件树失败:",a),t.error("加载文件树失败，请检查网络连接")}},ya=a=>{const t=a.replace(/\\/g,"/");e.value=t,da.value=1,xa()},ba=a=>!(a.size>104857600&&(t.error("文件大小不能超过100MB"),1)),ka=a=>{const e=va.value.findIndex(e=>e.uid===a.uid);-1!==e&&va.value.splice(e,1)},wa=()=>{0!==va.value.length?(ga.value=!1,va.value.forEach(a=>{ma.value.push({id:ha++,file:a.raw,progress:0,status:"waiting"})}),ja()):t.warning("请选择要上传的文件")},ja=()=>{const a=ma.value.find(a=>"waiting"===a.status);if(!a)return;a.status="uploading";const t=setInterval(()=>{a.progress+=Math.floor(10*Math.random())+5,a.progress>=100&&(clearInterval(t),a.progress=100,setTimeout(()=>{a.status="success";const t={id:Date.now(),name:a.file.name,relativePath:e.value?`${e.value}/${a.file.name}`:a.file.name,path:"",url:URL.createObjectURL(a.file),size:a.file.size,type:_a(a.file.name),createdAt:(new Date).toISOString().split("T")[0]};$.value.push(t),ja()},500))},200)},_a=a=>{const e=a.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(e)?"image":["mp4","mov","avi","mkv"].includes(e)?"video":["pdf","doc","docx","xls","xlsx","ppt","pptx"].includes(e)?"document":["zip","rar","7z","tar"].includes(e)?"archive":"other"},za=a=>{if(0===a)return"0 Bytes";const e=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,e)).toFixed(2))+" "+["Bytes","KB","MB","GB"][e]},Ca=p(()=>{if(!e.value)return[];const a=e.value.replace(/\\/g,"/").split("/").filter(a=>a);let t="";const l=[];for(let e=0;e<a.length;e++)t=t?`${t}/${a[e]}`:a[e],l.push({name:a[e],path:t});return l.splice(0,2),l}),Ma=p(()=>(console.log("1231231231",$.value),$.value.filter(a=>{if("file"!==a.type)return!1;const e=!ra.value||_a(a.name)===ra.value,t=!na.value||a.name.toLowerCase().includes(na.value.toLowerCase());return e&&t}))),Ba=p(()=>$.value.filter(a=>"directory"===a.type&&(!na.value||a.name.toLowerCase().includes(na.value.toLowerCase())))),$a=p(()=>{const a=(da.value-1)*ca.value,e=a+ca.value;return Ma.value.slice(a,e)});return(a,e)=>{const c=g("Folder"),u=l,p=g("Delete"),M=g("FolderOpened"),$=o,na=i,ra=g("UploadFilled"),ha=s,_a=n,Fa=g("Document"),La=g("CircleCheckFilled"),Ua=g("CircleCloseFilled"),Ia=r;return f(),v("div",F,[m("div",L,[m("div",U,[m("span",{onClick:e[0]||(e[0]=a=>ya("")),class:"path-item"},"根目录"),(f(!0),v(y,null,b(Ca.value,(a,t)=>(f(),v(y,{key:t},[e[5]||(e[5]=m("span",{class:"path-separator"},">",-1)),m("span",{onClick:e=>ya(a.path),class:k(["path-item",{current:t===Ca.value.length-1}])},w(a.name),11,I)],64))),128))])]),Ba.value.length>0||$a.value.length>0?(f(),v("div",V,[(f(!0),v(y,null,b(Ba.value,a=>(f(),v("div",{key:a.id,class:"image-item",onClick:e=>ya(a.relativePath)},[m("div",O,[x(u,{class:"folder-icon"},{default:j(()=>[x(c)]),_:1}),m("div",P,w(a.name),1)])],8,D))),128)),(f(!0),v(y,null,b($a.value,a=>(f(),v("div",{key:a.id,class:"image-item",onClick:e=>(a=>{pa.value=a,ua.value=!0})(a)},[m("img",{src:a.url,class:"image-preview",alt:a.name},null,8,T),m("div",Y,[m("div",E,w(a.name),1),m("div",R,w(za(a.size)),1)]),m("div",A,[m("div",{class:"action-btn delete",onClick:_(e=>(async a=>{let e=a.url;d.confirm(`确定要删除文件 "${a.name}" 吗？此操作不可恢复。`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(async()=>{200==(await B(e)).code&&t.success("删除成功"),xa()}).catch(()=>{})})(a),["stop"])},[x(u,null,{default:j(()=>[x(p)]),_:1})],8,G)])],8,S))),128))])):(f(),v("div",K,[x(u,{size:50},{default:j(()=>[x(M)]),_:1}),e[6]||(e[6]=m("p",null,"暂无文件",-1))])),Ba.value.length>0?(f(),v("div",H,[x($,{background:"",layout:"prev, pager, next",total:Ma.value.length,"page-size":ca.value,"current-page":da.value,"onUpdate:currentPage":e[1]||(e[1]=a=>da.value=a)},null,8,["total","page-size","current-page"])])):h("",!0),x(na,{modelValue:ua.value,"onUpdate:modelValue":e[2]||(e[2]=a=>ua.value=a),class:"image-dialog",width:"80%",top:"5vh"},{default:j(()=>[m("img",{src:pa.value?pa.value.url:"",alt:"预览"},null,8,J),m("div",q,[m("div",N,[e[7]||(e[7]=m("span",{class:"file-info"},"尺 寸：",-1)),z(w(za(pa.value.size)),1)]),m("div",Q,[e[8]||(e[8]=m("span",{class:"file-info"},"文件名：",-1)),z(w(pa.value.name),1)]),m("div",W,[e[9]||(e[9]=m("span",{class:"file-info"},"网 址：",-1)),z(w(pa.value.url),1)])])]),_:1},8,["modelValue"]),x(na,{modelValue:ga.value,"onUpdate:modelValue":e[4]||(e[4]=a=>ga.value=a),title:"上传文件",width:"600px"},{footer:j(()=>[m("div",X,[x(_a,{onClick:e[3]||(e[3]=a=>ga.value=!1)},{default:j(()=>[...e[12]||(e[12]=[z("取消",-1)])]),_:1}),x(_a,{type:"primary",onClick:wa},{default:j(()=>[...e[13]||(e[13]=[z("开始上传",-1)])]),_:1})])]),default:j(()=>[x(ha,{ref_key:"uploadRef",ref:fa,class:"upload-demo",drag:"",multiple:"","auto-upload":!1,"on-change":ba,"on-remove":ka,"file-list":va.value},{tip:j(()=>[...e[10]||(e[10]=[m("div",{class:"el-upload__tip"}," 支持上传图片、文档、视频等文件，单个文件不超过 100MB ",-1)])]),default:j(()=>[x(u,{class:"el-icon--upload"},{default:j(()=>[x(ra)]),_:1}),e[11]||(e[11]=m("div",{class:"el-upload__text"},[z(" 拖拽文件到此处或 "),m("em",null,"点击选择文件")],-1))]),_:1},8,["file-list"])]),_:1},8,["modelValue"]),ma.value.length>0?(f(),v("div",Z,[(f(!0),v(y,null,b(ma.value,a=>(f(),v("div",{key:a.id,class:"upload-item"},[x(u,{size:24,class:k("success"===a.status?"upload-success":"error"===a.status?"upload-error":"")},{default:j(()=>["uploading"===a.status||"waiting"===a.status?(f(),C(Fa,{key:0})):"success"===a.status?(f(),C(La,{key:1})):(f(),C(Ua,{key:2}))]),_:2},1032,["class"]),m("div",aa,[m("div",ea,w(a.file.name),1),"uploading"===a.status?(f(),C(Ia,{key:0,percentage:a.progress,"stroke-width":4,"show-text":!1},null,8,["percentage"])):h("",!0),m("div",ta,["waiting"===a.status?(f(),v("span",la,"等待上传...")):"uploading"===a.status?(f(),v("span",oa,"上传中: "+w(a.progress)+"%",1)):"success"===a.status?(f(),v("span",ia,"上传成功")):"error"===a.status?(f(),v("span",sa,"上传失败: "+w(a.error),1)):h("",!0)])]),"error"===a.status?(f(),C(_a,{key:0,type:"danger",text:"",onClick:e=>(a=>{a.status="waiting",a.progress=0,a.error=null,ja()})(a)},{default:j(()=>[...e[14]||(e[14]=[z(" 重试 ",-1)])]),_:1},8,["onClick"])):h("",!0)]))),128))])):h("",!0)])}}};a("default",$(na,[["__scopeId","data-v-9066599a"]]))}}});
