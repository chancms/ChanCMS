import{g as S,u as T,v as D,F,w as j,b as A,x as H,y as L,a as M}from"./element-plus.js";import{a as O}from"./vue-router.js";import{H as P,F as R,B as U}from"./@element-plus.js";import{l as q,D as z,r as I}from"./dialog2.js";import{g as J}from"./index.js";import{r as p,W as K,w as Q,n as W,c as $,o as f,O as e,a as G,L as i,a3 as g,Q as X,K as Y,H as Z,u as r}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./vue3-ace-editor.js";import"./resize-observer-polyfill.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const ee={class:"bg-fff radius-6 pd-20"},te={class:"mr-10 ml-10"},Ve={__name:"index",setup(oe){const b=p([]),m=p(0),u=p(1),_=J("username"),o=K({dialogVisible:!1,id:0,params:{type_code:""},list:[]}),y=O();Q(()=>o.dialogVisible,t=>{t||c()});const c=async()=>{try{let t=o.params;const a=await q(t);if(a.code===200){let n={};a.data.list.forEach(d=>{n[d.config_key]=JSON.parse(d.config_value)}),o.list=[...a.data.list],m.value=a.data.total}}catch(t){console.log(t)}},h=t=>{u.value=t,c()},v=t=>{b.value=t},w=t=>{o.id=t.id,o.dialogVisible=!0},C=()=>{o.id=0,o.dialogVisible=!0},k=async t=>{try{const{id:a}=t;(await I({id:a})).code===200&&(M.success("删除成功 ^_^"),c())}catch(a){console.log(a)}};return W(()=>{o.params.type_code=y.params.id,c()}),(t,a)=>{const n=S,d=T,s=D,E=F,x=A,V=j,B=H,N=L;return f(),$("div",ee,[e(d,{type:"flex",justify:"end"},{default:i(()=>[e(n,{type:"primary",onClick:C,round:""},{default:i(()=>a[1]||(a[1]=[g("新增",-1)])),_:1,__:[1]})]),_:1}),G("div",te,[e(B,{data:o.list,"tooltip-effect":"dark","row-key":"id",onSelectionChange:v},{default:i(()=>[e(s,{prop:"id",width:"100",label:"编号"}),e(s,{prop:"type_code",label:"标识"}),e(s,{prop:"config_key",label:"配置名称"}),e(s,{prop:"status",label:"是否启用"},{default:i(l=>[g(X(l.row.status==1?"启用":"关闭"),1)]),_:1}),e(s,{fixed:"right",width:"200",label:"操作"},{default:i(l=>[e(n,{icon:r(P),circle:"",onClick:ae=>w(l.row)},null,8,["icon","onClick"]),e(E,{width:"220",onConfirm:()=>k(l.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"你确定吗？要删管理员？"},{reference:i(()=>[e(n,{icon:r(R),disabled:r(_)===l.row.username,circle:""},null,8,["icon","disabled"])]),_:2},1032,["onConfirm"]),r(_)===l.row.username?(f(),Y(V,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:i(()=>[e(x,{class:"ml-10 t-4 pointer"},{default:i(()=>[e(r(U),{class:"c-165dff"})]),_:1})]),_:1})):Z("",!0)]),_:1})]),_:1},8,["data"]),e(N,{background:"",layout:"prev, pager, next",total:m.value,"page-size":10,"model-value":u.value,"onUpdate:modelValue":h,"hide-on-single-page":""},null,8,["total","model-value"])]),e(z,{visible:o.dialogVisible,"onUpdate:visible":a[0]||(a[0]=l=>o.dialogVisible=l),id:o.id,type_code:o.params.type_code},null,8,["visible","id","type_code"])])}}};export{Ve as default};
