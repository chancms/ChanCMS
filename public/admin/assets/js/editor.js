import{G as U,X as V,g as D,b as G,u as J,a as _}from"./element-plus.js";import{V as O}from"./vue3-ace-editor.js";import"./ace-builds.js";import{_ as z}from"./index.js";import{r as i,b as h,w as P,ai as g,c as b,o as C,U as e,a as n,K as a,a2 as y,G as q,O as u,u as F}from"./@vue.js";import"./dayjs.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./resize-observer-polyfill.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const H={class:"editor-container"},K={class:"status-info ml-auto"},W={key:0},X={class:"editor-area"},Q={class:"editor-wrapper"},Y={__name:"editor",props:{contentId:{type:[String,Number],required:!0},fileType:{type:String,default:"text",validator:c=>["html","css","js","javascript","json","text"].includes(c.toLowerCase())},content:{type:String,default:""}},emits:["save","refresh"],setup(c,{emit:x}){const s=c,m=x,r=i(s.content),d=i(s.content),l=i(!1),p=i(null),j=h(()=>({html:"HTML",css:"CSS",js:"JavaScript",javascript:"JavaScript",json:"JSON"})[s.fileType]||s.fileType.toUpperCase()),w=h(()=>({html:"html",css:"css",js:"javascript",javascript:"javascript",json:"json"})[s.fileType.toLowerCase()]||"text"),S=i({fontSize:14,tabSize:2,showLineNumbers:!0,highlightActiveLine:!0,wrap:!0,useWorker:!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,showPrintMargin:!1,behavioursEnabled:!0}),E=o=>{o.selection.on("changeCursor",()=>{p.value=o.selection.getCursor()})},k=()=>{l.value=r.value!==d.value},I=()=>{l.value&&(_.info("请求保存..."),m("save",{id:s.contentId,content:r.value}))},L=()=>{_.info("请求刷新内容..."),m("refresh",s.contentId)};return P(()=>s.content,o=>{r.value!==o&&(r.value=o,d.value=o,l.value=!1)}),(o,t)=>{const N=g("DocumentAdd"),v=G,f=D,T=g("Refresh"),A=V,B=U,M=J;return C(),b("div",H,[e(M,{class:"toolbar bg-gray-800 text-white"},{default:a(()=>[e(B,{span:24,class:"flex items-center"},{default:a(()=>[e(A,null,{default:a(()=>[e(f,{type:"primary",onClick:I,disabled:!l.value,class:"save-btn"},{default:a(()=>[e(v,null,{default:a(()=>[e(N)]),_:1}),t[1]||(t[1]=y(" 保存 ",-1))]),_:1},8,["disabled"]),e(f,{onClick:L,class:"refresh-btn"},{default:a(()=>[e(v,null,{default:a(()=>[e(T)]),_:1}),t[2]||(t[2]=y(" 刷新 ",-1))]),_:1})]),_:1}),n("div",K,[n("span",null,u(j.value),1),t[3]||(t[3]=n("span",{class:"mx-2"},"|",-1)),t[4]||(t[4]=n("span",null,"UTF-8",-1)),t[5]||(t[5]=n("span",{class:"mx-2"},"|",-1)),p.value?(C(),b("span",W," 行 "+u(p.value.row+1)+", 列 "+u(p.value.column+1),1)):q("",!0)])]),_:1})]),_:1}),n("div",X,[n("div",Q,[e(F(O),{value:r.value,"onUpdate:value":t[0]||(t[0]=R=>r.value=R),lang:w.value,theme:"monokai",options:S.value,onInit:E,onChange:k,style:{height:"100%",width:"100%"}},null,8,["value","lang","options"])])])])}}},yt=z(Y,[["__scopeId","data-v-d1cc53be"]]);export{yt as default};
