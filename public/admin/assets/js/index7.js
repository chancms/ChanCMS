import{r as N,s as Y,g as F,q as H,I as S,v as j,x as q,a as R}from"./element-plus.js";import{I as U,H as $,F as A}from"./@element-plus.js";import{t as K,a as O}from"./index.js";import{l as W,D as z,r as G}from"./dialog4.js";import{d as J}from"./dayjs.js";import{W as w,n as V,w as P,r as c,c as _,o as m,a as b,O as o,L as a,u as y,a3 as g,T as Q,K as X}from"./@vue.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./ace-builds.js";/* empty css     */const Z={class:"bg-fff radius-6 pd-20 mb-10"},ee={class:"bg-fff radius-6 pd-20"},te={class:"flex justify-end"},oe={key:0},le={key:1},Ee={__name:"index",setup(ae){const l=w({dialogVisible:!1,id:0,params:{},list:[]});V(()=>{d()}),P(()=>l.dialogVisible,t=>{t||d()});const d=async()=>{try{const t=await W();t.code===200&&(t.data.list.forEach(e=>{e.id=Number(e.id),e.create_time=J(e.create_time).format("YYYY-MM-DD HH:mm:ss")}),l.list=t.data.list,u.value=!1)}catch(t){console.log(t)}},h=t=>{l.id=t.id,l.dialogVisible=!0},x=()=>{l.id=0,l.dialogVisible=!0},E=async t=>{console.log(t);try{(await G({id:t.id})).code===200&&(R({message:"删除成功",type:"success"}),d())}catch(e){console.log(e)}},i=w({keywords:""}),u=c(!0),k=c([]),C=c(null),D=c([]),T=()=>{i.keywords="",k.value=[],D.value=[],p()},p=async()=>{try{const t=i.keywords,e=await fetch(t);if(e.code===200){const f=K(e.data);k.value=O(f),u.value=!1}}catch(t){console.log(t)}};return V(()=>{p()}),(t,e)=>{const f=Y,v=N,r=F,B=H,n=j,I=q,L=S;return m(),_("div",null,[b("div",Z,[o(B,{inline:!0,model:i},{default:a(()=>[o(v,{label:"名称",prop:"keywords"},{default:a(()=>[o(f,{placeholder:"请输入栏目名称","suffix-icon":y(U),modelValue:i.keywords,"onUpdate:modelValue":e[0]||(e[0]=s=>i.keywords=s),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),o(v,null,{default:a(()=>[o(r,{type:"primary",onClick:p,round:""},{default:a(()=>e[2]||(e[2]=[g("搜索")])),_:1}),o(r,{onClick:T,round:""},{default:a(()=>e[3]||(e[3]=[g("清空")])),_:1})]),_:1})]),_:1},8,["model"])]),b("div",ee,[b("div",te,[o(r,{type:"primary",onClick:x,round:""},{default:a(()=>e[4]||(e[4]=[g("新增")])),_:1})]),Q((m(),X(I,{ref_key:"multipleTableRef",ref:C,data:l.list,"tooltip-effect":"dark","row-key":"id"},{default:a(()=>[o(n,{prop:"id",label:"角色编号"}),o(n,{prop:"name",align:"center",label:"角色名称"}),o(n,{prop:"key",align:"center",label:"权限标识"}),o(n,{prop:"status",label:"状态"},{default:a(s=>[s.row.status=="1"?(m(),_("p",oe,"启用")):(m(),_("p",le,"停用"))]),_:1}),o(n,{fixed:"right",label:"操作",width:"160"},{default:a(s=>[o(r,{icon:y($),circle:"",onClick:M=>h(s.row)},null,8,["icon","onClick"]),o(r,{icon:y(A),circle:"",onClick:M=>E(s.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[L,u.value]])]),o(z,{visible:l.dialogVisible,"onUpdate:visible":e[1]||(e[1]=s=>l.dialogVisible=s),id:l.id,onSuccess:d},null,8,["visible","id"])])}}};export{Ee as default};
