import{a as d,g as B,u as P,v as A,x as M,y as N}from"./element-plus.js";import{u as V}from"./vue-router.js";import{H as $,F as z}from"./@element-plus.js";import{l as F,a as H}from"./message.js";import{_ as I}from"./index.js";import{r as s,n as L,aj as O,c as r,o as i,O as e,L as n,a3 as g,Q,u as y}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const q={class:"bg-fff radius-6 pd-20"},G={key:0},J={key:1},K={key:2},U={key:3},W={__name:"index",setup(X){const h=s(null),m=s([]),b=s([]),u=s(0),_=s(1),k=V(),w=$,v=z;L(()=>{c()});const c=async()=>{try{const t=await F(_.value);t.code===200?(m.value=t.data.list,u.value=t.data.count):d({message:t.msg,type:"error"})}catch(t){console.log(t)}},C=t=>{_.value=t,c()},x=t=>{b.value=t},E=t=>{k.push({name:"message-edit",params:{id:t.id}})},D=async t=>{try{const l=await H(t.id);l.code===200?(d({message:"删除成功 ^_^",type:"success"}),c()):d({message:l.msg,type:"error"})}catch(l){console.log(l)}};return(t,l)=>{const p=B,T=O("router-link"),f=P,o=A,R=M,S=N;return i(),r("div",q,[e(f,{type:"flex",justify:"end"},{default:n(()=>[e(T,{to:"/message/add"},{default:n(()=>[e(p,{type:"primary",round:""},{default:n(()=>l[0]||(l[0]=[g("新增",-1)])),_:1,__:[0]})]),_:1})]),_:1}),e(R,{ref_key:"multipleTableRef",ref:h,data:m.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:x},{default:n(()=>[e(o,{type:"selection"}),e(o,{prop:"id",width:"80",label:"编号"}),e(o,{prop:"title",width:"300",label:"标题"}),e(o,{prop:"type",label:"留言类型"},{default:n(a=>[a.row.type==1?(i(),r("span",G,"咨询")):a.row.type==2?(i(),r("span",J,"建议")):a.row.type==3?(i(),r("span",K,"投诉")):(i(),r("span",U,"其它"))]),_:1}),e(o,{prop:"name",label:"联系人"}),e(o,{prop:"tel",label:"手机号"}),e(o,{prop:"company",label:"公司单位"}),e(o,{prop:"createdAt",label:"发布时间"},{default:n(a=>[g(Q(a.row.createdAt),1)]),_:1}),e(o,{fixed:"right",width:"100",label:"操作"},{default:n(a=>[e(p,{icon:y(w),circle:"",onClick:j=>E(a.row)},null,8,["icon","onClick"]),e(p,{icon:y(v),circle:"",onClick:j=>D(a.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),e(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:n(()=>[e(S,{background:"",layout:"prev, pager, next",onCurrentChange:C,"page-size":10,total:u.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},he=I(W,[["__scopeId","data-v-5ee5f618"]]);export{he as default};
