import{r as M,s as P,g as U,q as z,v as H,F as J,x as K,y as O,u as G,a as w}from"./element-plus.js";import{u as L}from"./vue-router.js";import{I as Q,H as W,F as X}from"./@element-plus.js";import{s as h,a as Y}from"./frag.js";import{_ as Z}from"./index.js";import{r as s,V as ee,n as oe,ai as te,aq as ae,c as ne,o as x,a as m,U as e,K as a,u as f,a2 as p,R as _,J as le,O as re}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const se={class:"bg-fff radius-6 pd-20 mb-10"},ie={class:"bg-fff pd-20 radius-6"},ce={class:"flex justify-end"},de={class:"inline-b ml-5"},me={__name:"index",setup(pe){const C=L(),b=s(null),E=s(null),d=ee({keywords:""}),g=s([]),R=s([]),v=s(0),y=s(1),V=o=>{b.value.resetFields(),i()},i=async()=>{try{const o=await h(y.value,d.keywords);o.code===200&&(g.value=o.data.list,v.value=o.data.count)}catch(o){console.log(o)}},F=o=>{y.value=o,i()},S=o=>{R.value=o},B=o=>{const t=o.id;C.push({name:"frag-edit",params:{id:t}})},D=async o=>{const t=o.id;try{const l=await Y(t);l.code===200?(w({message:"文章删除成功 ^_^",type:"success"}),h()):w({message:l.msg,type:"error"})}catch(l){console.log(l)}};return oe(()=>{i()}),(o,t)=>{const l=P,k=M,c=U,T=z,I=te("router-link"),r=H,A=J,N=K,$=O,j=G,u=ae("permission-disabled");return x(),ne("div",null,[m("div",se,[e(T,{inline:!0,model:d,ref_key:"formRef",ref:b},{default:a(()=>[e(k,{label:"标题",prop:"keywords"},{default:a(()=>[e(l,{placeholder:"请输入内容","suffix-icon":f(Q),clearable:"",onClear:i,modelValue:d.keywords,"onUpdate:modelValue":t[0]||(t[0]=n=>d.keywords=n)},null,8,["suffix-icon","modelValue"])]),_:1}),e(k,null,{default:a(()=>[e(c,{type:"primary",onClick:i,round:""},{default:a(()=>[...t[2]||(t[2]=[p("搜索",-1)])]),_:1}),e(c,{onClick:t[1]||(t[1]=n=>V("formRef")),round:""},{default:a(()=>[...t[3]||(t[3]=[p("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),m("div",ie,[m("div",ce,[_((x(),le(I,{class:"mt-10",to:"/frag/add"},{default:a(()=>[e(c,{type:"primary",round:""},{default:a(()=>[...t[4]||(t[4]=[p("新增",-1)])]),_:1})]),_:1})),[[u,["editor","admin","super"]]])]),e(N,{ref_key:"multipleTableRef",ref:E,data:g.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:S},{default:a(()=>[e(r,{type:"selection"}),e(r,{prop:"id",width:"60",label:"编号"}),e(r,{prop:"name",label:"名称"}),e(r,{prop:"mark",label:"标识"}),e(r,{prop:"createdAt",label:"发布时间"},{default:a(n=>[p(re(n.row.createdAt),1)]),_:1}),e(r,{fixed:"right",width:"120",label:"操作"},{default:a(n=>[_(e(c,{icon:f(W),circle:"",onClick:q=>B(n.row)},null,8,["icon","onClick"]),[[u,["editor","admin","super"]]]),m("div",de,[e(A,{width:"220",onConfirm:q=>D(n.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"确定删除吗？如果在使用，删掉会模板会报错"},{reference:a(()=>[_(e(c,{icon:f(X),circle:""},null,8,["icon"]),[[u,["editor","admin","super"]]])]),_:1},8,["onConfirm"])])]),_:1})]),_:1},8,["data"])]),e(j,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:a(()=>[e($,{background:"",layout:"prev, pager, next",onCurrentChange:F,"page-size":20,total:v.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},Ne=Z(me,[["__scopeId","data-v-e79eb632"]]);export{Ne as default};
