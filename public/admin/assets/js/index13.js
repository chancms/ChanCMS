import{r as q,s as M,g as P,q as U,v as z,F as H,x as J,y as K,u as O,a as k}from"./element-plus.js";import{u as G}from"./vue-router.js";import{I as L,H as Q,F as W}from"./@element-plus.js";import{s as X,a as Y}from"./frag.js";import{_ as Z}from"./index.js";import{r as i,V as ee,n as oe,ai as te,aq as ne,c as ae,o as w,a as m,U as e,K as n,u as f,a2 as p,R as _,J as le,O as re}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const se={class:"bg-fff radius-6 pd-20 mb-10"},ie={class:"bg-fff pd-20 radius-6"},ce={class:"flex justify-end"},de={class:"inline-b ml-5"},me={__name:"index",setup(pe){const h=G(),g=i(null),x=i(null),d=ee({keywords:""}),v=i([]),C=i([]),E=i(0),y=i(1),R=t=>{g.value.resetFields(),r()},r=async()=>{try{const t=await X(y.value,d.keywords);if(t.code===200){const{list:o,count:a}=t.data;v.value=o,a.value=a}}catch(t){console.log(t)}},V=t=>{y.value=t,r()},F=t=>{C.value=t},S=t=>{const o=t.id;h.push({name:"frag-edit",params:{id:o}})},B=async t=>{const o=t.id;try{const a=await Y(o);a.code===200?(k({message:"文章删除成功 ^_^",type:"success"}),r()):k({message:a.msg,type:"error"})}catch(a){console.log(a)}};return oe(()=>{r()}),(t,o)=>{const a=M,b=q,c=P,D=U,T=te("router-link"),s=z,I=H,A=J,N=K,$=O,u=ne("permission-disabled");return w(),ae("div",null,[m("div",se,[e(D,{inline:!0,model:d,ref_key:"formRef",ref:g},{default:n(()=>[e(b,{label:"标题",prop:"keywords"},{default:n(()=>[e(a,{placeholder:"请输入内容","suffix-icon":f(L),clearable:"",onClear:r,modelValue:d.keywords,"onUpdate:modelValue":o[0]||(o[0]=l=>d.keywords=l)},null,8,["suffix-icon","modelValue"])]),_:1}),e(b,null,{default:n(()=>[e(c,{type:"primary",onClick:r,round:""},{default:n(()=>[...o[2]||(o[2]=[p("搜索",-1)])]),_:1}),e(c,{onClick:o[1]||(o[1]=l=>R("formRef")),round:""},{default:n(()=>[...o[3]||(o[3]=[p("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),m("div",ie,[m("div",ce,[_((w(),le(T,{class:"mt-10",to:"/frag/add"},{default:n(()=>[e(c,{type:"primary",round:""},{default:n(()=>[...o[4]||(o[4]=[p("新增",-1)])]),_:1})]),_:1})),[[u,["editor","admin","super"]]])]),e(A,{ref_key:"multipleTableRef",ref:x,data:v.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:F},{default:n(()=>[e(s,{type:"selection"}),e(s,{prop:"id",width:"60",label:"编号"}),e(s,{prop:"name",label:"名称"}),e(s,{prop:"mark",label:"标识"}),e(s,{prop:"createdAt",label:"发布时间"},{default:n(l=>[p(re(l.row.createdAt),1)]),_:1}),e(s,{fixed:"right",width:"120",label:"操作"},{default:n(l=>[_(e(c,{icon:f(Q),circle:"",onClick:j=>S(l.row)},null,8,["icon","onClick"]),[[u,["editor","admin","super"]]]),m("div",de,[e(I,{width:"220",onConfirm:j=>B(l.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"确定删除吗？如果在使用，删掉会模板会报错"},{reference:n(()=>[_(e(c,{icon:f(W),circle:""},null,8,["icon"]),[[u,["editor","admin","super"]]])]),_:1},8,["onConfirm"])])]),_:1})]),_:1},8,["data"])]),e($,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:n(()=>[e(N,{background:"",layout:"prev, pager, next",onCurrentChange:V,"page-size":20,total:E.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},Ne=Z(me,[["__scopeId","data-v-06d0f09d"]]);export{Ne as default};
