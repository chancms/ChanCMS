import{a as f,r as $,s as j,g as D,q as M,v as U,x as z,y as H,u as L}from"./element-plus.js";import{a as O,u as W}from"./vue-router.js";import{I as A,H as G,F as J}from"./@element-plus.js";import{s as K,a as Q}from"./tag.js";import{_ as X}from"./index.js";import{r as i,W as Y,n as Z,w as ee,ab as te,c as oe,o as ae,a as _,O as o,L as a,u as y,a3 as g}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const re={class:"bg-fff radius-6 pd-20 mb-10"},ne={class:"bg-fff radius-6 pd-20"},le={class:"flex justify-end align-c"},se={__name:"index",setup(ie){const k=O(),m=W(),v=i(null),h=i(null),n=Y({keywords:""}),w=i([]),E=i([]),b=i(0),l=i(1);Z(()=>{const{cur:e=1,keywords:t=""}=k.query;l.value=parseInt(e,10),n.keywords=t,c()}),ee(k,(e,t)=>{if(e.name==="tag-index"){const{cur:r,keywords:p}=e.query;l.value=parseInt(r,10),n.keywords=p,c()}});const x=e=>{e&&v.value.resetFields(),m.replace({name:"tag-index",query:{cur:1,keywords:""}}),c()},c=async()=>{try{const e=await K(l.value,n.keywords);e.code===200?(w.value=e.data.list,b.value=e.data.count):f({message:e.msg,type:"error"})}catch(e){console.error(e)}},C=()=>{m.replace({name:"tag-index",query:{cur:l.value,keywords:n.keywords}}),c()},R=e=>{l.value=parseInt(e,10),C()},I=e=>{E.value=e},T=e=>{const t=e.id;m.push({name:"tag-edit",params:{id:t}})},V=async e=>{const t=e.id;try{const r=await Q(t);r.code===200?(f({message:"删除成功 ^_^",type:"success"}),c()):f({message:r.msg,type:"error"})}catch(r){console.error(r)}};return(e,t)=>{const r=j,p=$,u=D,q=M,P=te("router-link"),d=U,S=z,B=H,F=L;return ae(),oe("div",null,[_("div",re,[o(q,{inline:!0,model:n,ref_key:"formRef",ref:v},{default:a(()=>[o(p,{label:"标题",prop:"keywords"},{default:a(()=>[o(r,{placeholder:"请输入内容","suffix-icon":y(A),clearable:"",onClear:x,modelValue:n.keywords,"onUpdate:modelValue":t[0]||(t[0]=s=>n.keywords=s)},null,8,["suffix-icon","modelValue"])]),_:1}),o(p,null,{default:a(()=>[o(u,{type:"primary",onClick:C,round:""},{default:a(()=>t[3]||(t[3]=[g("搜索")])),_:1}),o(u,{onClick:t[1]||(t[1]=s=>x("formRef")),round:""},{default:a(()=>t[4]||(t[4]=[g("清空")])),_:1})]),_:1})]),_:1},8,["model"])]),_("div",ne,[_("div",le,[o(P,{to:"/tag/add"},{default:a(()=>[o(u,{type:"primary",round:""},{default:a(()=>t[5]||(t[5]=[g("新增")])),_:1})]),_:1})]),o(S,{ref_key:"multipleTableRef",ref:h,data:w.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:I},{default:a(()=>[o(d,{type:"selection"}),o(d,{prop:"id",label:"编号"}),o(d,{prop:"name",label:"名称"}),o(d,{prop:"path",label:"标识"}),o(d,{fixed:"right",width:"100",label:"操作"},{default:a(s=>[o(u,{icon:y(G),circle:"",onClick:N=>T(s.row)},null,8,["icon","onClick"]),o(u,{icon:y(J),circle:"",onClick:N=>V(s.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),o(F,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:a(()=>[o(B,{background:"",layout:"prev, pager, next",onCurrentChange:R,"page-size":10,total:b.value,currentPage:l.value,"onUpdate:currentPage":t[2]||(t[2]=s=>l.value=s),"hide-on-single-page":""},null,8,["total","currentPage"])]),_:1})])])}}},Ve=X(se,[["__scopeId","data-v-7ca3d843"]]);export{Ve as default};
