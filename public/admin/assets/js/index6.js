import{r as q,s as M,g as R,q as U,I as $,v as j,x as A,a as H}from"./element-plus.js";import{I as K,H as O,F as W}from"./@element-plus.js";import{t as y,a as k}from"./index.js";import{l as z,D as G,r as J}from"./dialog3.js";import{W as V,w as P,n as C,r as u,c as b,o as m,a as g,O as t,L as l,u as h,a3 as v,T as Q,K as X}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const Y={class:"bg-fff radius-6 pd-20 mb-10"},Z={class:"bg-fff radius-6 pd-20"},ee={class:"flex justify-end"},oe={key:0},te={key:1},Ce={__name:"index",setup(le){const a=V({dialogVisible:!1,id:0,params:{},list:[]});P(()=>a.dialogVisible,o=>{o||c()}),C(()=>{c()});const c=async()=>{try{const o=await z();if(o.code===200){o.data.list.forEach(r=>{r.id=Number(r.id)});const e=y(o.data.list);p.value=k(e),_.value=!1}}catch(o){console.log(o)}},x=o=>{a.id=parseInt(o.id),a.dialogVisible=!0},E=()=>{a.id=0,a.dialogVisible=!0},T=async o=>{console.log(o);try{(await J({id:o.id})).code===200&&(H({message:"删除成功",type:"success"}),c())}catch(e){console.log(e)}},n=V({keywords:""}),_=u(!0),p=u([]),B=u(null),D=u([]),I=()=>{n.keywords="",p.value=[],D.value=[],f()},f=async()=>{try{const o=n.keywords,e=await fetch(o);if(e.code===200){const r=y(e.data);p.value=k(r),_.value=!1}}catch(o){console.log(o)}};return C(()=>{f()}),(o,e)=>{const r=M,w=q,d=R,L=U,s=j,N=A,F=$;return m(),b("div",null,[g("div",Y,[t(L,{inline:!0,model:n},{default:l(()=>[t(w,{label:"名称",prop:"keywords"},{default:l(()=>[t(r,{placeholder:"请输入栏目名称","suffix-icon":h(K),modelValue:n.keywords,"onUpdate:modelValue":e[0]||(e[0]=i=>n.keywords=i),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),t(w,null,{default:l(()=>[t(d,{type:"primary",onClick:f,round:""},{default:l(()=>e[2]||(e[2]=[v("搜索",-1)])),_:1,__:[2]}),t(d,{onClick:I,round:""},{default:l(()=>e[3]||(e[3]=[v("清空",-1)])),_:1,__:[3]})]),_:1})]),_:1},8,["model"])]),g("div",Z,[g("div",ee,[t(d,{type:"primary",onClick:E,round:""},{default:l(()=>e[4]||(e[4]=[v("新增",-1)])),_:1,__:[4]})]),Q((m(),X(N,{ref_key:"multipleTableRef",ref:B,data:p.value,"tooltip-effect":"dark","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:l(()=>[t(s,{prop:"title",label:"菜单管理",width:"140"}),t(s,{prop:"path",align:"center",label:"路由"}),t(s,{prop:"component",align:"center",label:"组件路径"}),t(s,{prop:"perms",align:"center",label:"权限标识"}),t(s,{prop:"order_num",align:"center",width:"60",label:"排序"}),t(s,{prop:"is_show",width:"60",label:"状态"},{default:l(i=>[i.row.is_show=="1"?(m(),b("p",oe,"显示")):(m(),b("p",te,"隐藏"))]),_:1}),t(s,{fixed:"right",label:"操作",width:"160"},{default:l(i=>[t(d,{icon:h(O),circle:"",onClick:S=>x(i.row)},null,8,["icon","onClick"]),t(d,{icon:h(W),circle:"",onClick:S=>T(i.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[F,_.value]])]),t(G,{visible:a.dialogVisible,"onUpdate:visible":e[1]||(e[1]=i=>a.dialogVisible=i),id:a.id,onSuccess:c},null,8,["visible","id"])])}}};export{Ce as default};
