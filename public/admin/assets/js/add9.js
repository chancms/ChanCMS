import{r as x,s as E,C as N,g as v,q as y,a as f}from"./element-plus.js";import{u as U}from"./vue-router.js";import{c as C}from"./model.js";import{r as q,V as _,c as w,o as R,U as t,K as o,a2 as s}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./index.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const B={class:"bg-fff pd-20 radius-6"},ee={__name:"add",setup(F){const d=U(),n=q(null),l=_({model:"",tableName:"",status:1,remark:""}),b=_({model:[{required:!0,message:"请输入模型名称",trigger:"blur"}],tableName:[{required:!0,message:"请输入表名",trigger:"blur"},{validator:g,trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]});function g(u,e,a){e.startsWith("ext_")?a():a(new Error("表名必须以 ext_ 开头"))}function V(){d.go(-1)}async function c(){n.value.validate(async u=>{if(u)try{const e=await C({...l});e.code===200?(f.success("创建表成功^_^"),d.go(-1)):f.error(e.msg)}catch(e){console.error(e)}else return console.log("error submit!!"),!1})}return(u,e)=>{const a=E,m=x,i=N,p=v,k=y;return R(),w("div",B,[t(k,{model:l,rules:b,ref_key:"formRef",ref:n,"label-width":"100px",class:"mt-20"},{default:o(()=>[t(m,{label:"模型名称",prop:"model"},{default:o(()=>[t(a,{modelValue:l.model,"onUpdate:modelValue":e[0]||(e[0]=r=>l.model=r),placeholder:"请输入模型名称"},null,8,["modelValue"])]),_:1}),t(m,{label:"新增表名",prop:"tableName"},{default:o(()=>[t(a,{modelValue:l.tableName,"onUpdate:modelValue":e[1]||(e[1]=r=>l.tableName=r),placeholder:"表名称必须ext_开头"},null,8,["modelValue"])]),_:1}),t(m,{label:"是否启用"},{default:o(()=>[t(i,{modelValue:l.status,"onUpdate:modelValue":e[2]||(e[2]=r=>l.status=r),label:1},{default:o(()=>[...e[5]||(e[5]=[s("开启",-1)])]),_:1},8,["modelValue"]),t(i,{modelValue:l.status,"onUpdate:modelValue":e[3]||(e[3]=r=>l.status=r),label:0},{default:o(()=>[...e[6]||(e[6]=[s("禁用",-1)])]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"备注",prop:"remark"},{default:o(()=>[t(a,{modelValue:l.remark,"onUpdate:modelValue":e[4]||(e[4]=r=>l.remark=r),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),t(m,null,{default:o(()=>[t(p,{type:"primary",onClick:c},{default:o(()=>[...e[7]||(e[7]=[s("保存",-1)])]),_:1}),t(p,{onClick:V},{default:o(()=>[...e[8]||(e[8]=[s("返回",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}};export{ee as default};
