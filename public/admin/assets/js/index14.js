import{g as R,u as S,v as P,x as j,y as A,a as m}from"./element-plus.js";import{u as M}from"./vue-router.js";import{H as N,F as V}from"./@element-plus.js";import{l as $,a as z}from"./friendlink.js";import{_ as F}from"./index.js";import{r as n,n as H,ab as I,c as L,o as O,O as e,L as l,a3 as _,Q,u as f}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const q={class:"pd-20 bg-fff"},G={__name:"index",setup(J){const g=n(null),c=n([]),y=n([]),p=n(0),d=n(1),b=M(),h=N,k=V;H(()=>{s()});const s=async()=>{try{const t=await $(d.value);t.code===200&&(c.value=t.data.list,p.value=t.data.count)}catch(t){console.log(t)}},v=t=>{d.value=t,s()},w=t=>{y.value=t},C=t=>{b.push({name:"friendlink-edit",params:{id:t.id}})},x=async t=>{try{const o=await z(t.id);o.code===200?(m({message:"删除成功 ^_^",type:"success"}),s()):m({message:o.msg,type:"error"})}catch(o){console.log(o)}};return(t,o)=>{const i=R,E=I("router-link"),u=S,a=P,D=j,T=A;return O(),L("div",q,[e(u,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:l(()=>[e(E,{to:"/friendlink/add"},{default:l(()=>[e(i,{type:"primary",round:""},{default:l(()=>o[0]||(o[0]=[_("新增")])),_:1})]),_:1})]),_:1}),e(D,{ref_key:"multipleTableRef",ref:g,data:c.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:w},{default:l(()=>[e(a,{type:"selection"}),e(a,{prop:"id",width:"60",label:"编号"}),e(a,{prop:"title",width:"120",label:"标题"}),e(a,{prop:"link",width:"260",label:"链接"}),e(a,{prop:"orderBy",label:"排序"}),e(a,{prop:"createdAt",label:"发布时间"},{default:l(r=>[_(Q(r.row.createdAt),1)]),_:1}),e(a,{fixed:"right",width:"100",label:"操作"},{default:l(r=>[e(i,{icon:f(h),circle:"",onClick:B=>C(r.row)},null,8,["icon","onClick"]),e(i,{icon:f(k),circle:"",onClick:B=>x(r.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),e(u,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:l(()=>[e(T,{background:"",layout:"prev, pager, next",onCurrentChange:v,"page-size":10,total:p.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},_e=F(G,[["__scopeId","data-v-83376fef"]]);export{_e as default};
