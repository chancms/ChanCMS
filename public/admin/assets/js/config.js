import{a as i,q as I,r as P,L as x,M as L,B as R,C as M,g as W,n as q}from"./element-plus.js";import{h as m,A as p}from"./index.js";import{V as C,r as O,n as T,aq as U,c as b,o as r,U as l,K as o,H as $,aa as j,J as v,a2 as c,R as D}from"./@vue.js";let N=()=>m({url:"".concat(p.BASE_API,"/cms/site/info"),method:"get"}),z=_=>m({url:"".concat(p.BASE_API,"/cms/site/update"),method:"post",data:_}),G=()=>m({url:"".concat(p.BASE_API,"/cms/sysApp/folder"),method:"get"});const H={class:"mr-10 ml-10"},J={__name:"config",setup(_){const a=C({loading:!0,folderList:[],set:{id:0,template:"default",uploadWay:"1"}}),f=O(null);T(async()=>{await g(),await E()});async function E(){try{const e=await G();e.code===200&&e.data.forEach(t=>{a.folderList.push({label:t,value:t})})}catch(e){console.log(e)}}async function g(){try{const e=await N();if(e.code===200){const{id:t,template:n,uploadWay:d}=e.data;a.loading=!1,a.set={id:t,template:n,uploadWay:d}}else i({message:e.msg,type:"error"})}catch(e){console.log(e)}}async function w(){try{const e=await z(a.set);e.code===200?(i({message:"更新成功^_^",type:"success"}),await g()):i({message:e.msg,type:"error"})}catch(e){console.log(e)}}function A(){f.value.validate(async e=>{if(e)await w();else return console.log("error submit!!"),!1})}return(e,t)=>{const n=L,d=x,u=P,y=M,S=R,V=W,B=I,h=q,k=U("permission-disabled");return r(),b("div",H,[l(h,{label:"应用配置",class:"mt-20",name:"config"},{default:o(()=>[l(B,{ref_key:"setFormRef",ref:f,model:a.set,"label-width":"120px"},{default:o(()=>[l(u,{prop:"template",label:"模板"},{default:o(()=>[l(d,{modelValue:a.set.template,"onUpdate:modelValue":t[0]||(t[0]=s=>a.set.template=s),placeholder:"请选择模板"},{default:o(()=>[(r(!0),b($,null,j(a.folderList,(s,F)=>(r(),v(n,{key:F,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"上传方式"},{default:o(()=>[l(S,{modelValue:a.set.uploadWay,"onUpdate:modelValue":t[1]||(t[1]=s=>a.set.uploadWay=s),class:"ml-4"},{default:o(()=>[l(y,{value:"1"},{default:o(()=>[...t[2]||(t[2]=[c("普通",-1)])]),_:1}),l(y,{value:"2"},{default:o(()=>[...t[3]||(t[3]=[c("七牛云",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,null,{default:o(()=>[D((r(),v(V,{type:"primary",onClick:A},{default:o(()=>[...t[4]||(t[4]=[c("保存",-1)])]),_:1})),[[k,["editor","admin","super"]]])]),_:1})]),_:1},8,["model"])]),_:1})])}}},Y=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as _,Y as c,N as g,z as u};
