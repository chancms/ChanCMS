import{a as p,q as B,r as F,L,M as x,B as A,C as I,g as S,n as W}from"./element-plus.js";import{g as h,u as R}from"./index23.js";import{h as C,A as M}from"./index.js";import{W as P,r as q,n as N,c as _,o as i,O as a,L as l,I as O,ac as T,K as U,a3 as u}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */let G=()=>C({url:"".concat(M.BASE_API,"/cms/sysApp/folder"),method:"get"});const K={class:"mr-10 ml-10"},ue={__name:"config",setup($){const o=P({loading:!0,folderList:[],set:{id:0,template:"default",uploadWay:"1"}}),d=q(null);N(async()=>{await c(),await g()});async function g(){try{const e=await G();e.code===200&&e.data.forEach(t=>{o.folderList.push({label:t,value:t})})}catch(e){console.log(e)}}async function c(){try{const e=await h();if(e.code===200){const{id:t,template:r,uploadWay:n}=e.data;o.loading=!1,o.set={id:t,template:r,uploadWay:n}}else p({message:e.msg,type:"error"})}catch(e){console.log(e)}}async function y(){try{const e=await R(o.set);e.code===200?(p({message:"更新成功^_^",type:"success"}),await c()):p({message:e.msg,type:"error"})}catch(e){console.log(e)}}function b(){d.value.validate(async e=>{if(e)await y();else return console.log("error submit!!"),!1})}return(e,t)=>{const r=x,n=L,m=F,f=I,E=A,v=S,w=B,V=W;return i(),_("div",K,[a(V,{label:"应用配置",class:"mt-20",name:"config"},{default:l(()=>[a(w,{ref_key:"setFormRef",ref:d,model:o.set,"label-width":"120px"},{default:l(()=>[a(m,{prop:"template",label:"模板"},{default:l(()=>[a(n,{modelValue:o.set.template,"onUpdate:modelValue":t[0]||(t[0]=s=>o.set.template=s),placeholder:"请选择模板"},{default:l(()=>[(i(!0),_(O,null,T(o.folderList,(s,k)=>(i(),U(r,{key:k,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"上传方式"},{default:l(()=>[a(E,{modelValue:o.set.uploadWay,"onUpdate:modelValue":t[1]||(t[1]=s=>o.set.uploadWay=s),class:"ml-4"},{default:l(()=>[a(f,{value:"1"},{default:l(()=>t[2]||(t[2]=[u("普通")])),_:1}),a(f,{value:"2"},{default:l(()=>t[3]||(t[3]=[u("七牛云")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:l(()=>[a(v,{type:"primary",onClick:b},{default:l(()=>t[4]||(t[4]=[u("保存")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}};export{ue as default};
