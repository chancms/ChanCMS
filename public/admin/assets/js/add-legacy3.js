System.register(["./element-plus-legacy.js","./category-legacy.js","./collect-legacy.js","./index-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./@element-plus-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vue-router-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],function(e,l){"use strict";var a,t,s,r,u,c,d,n,o,i,g,m,p,f,_,y,h,V,b,v,j,T,U,k,w,x,N,q,C,$,z,D,H;return{setters:[e=>{a=e.m,t=e.n,s=e.r,r=e.s,u=e.B,c=e.C,d=e.g,n=e.V,o=e.N,i=e.q,g=e.a},e=>{m=e.f},e=>{p=e.g,f=e.a,_=e.c},e=>{y=e._,h=e.a,V=e.t,b=e.b},e=>{v=e.r,j=e.W,T=e.n,U=e.c,k=e.o,w=e.O,x=e.L,N=e.K,q=e.H,C=e.a,$=e.a3,z=e.I,D=e.ac,H=e.Q},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent="[data-v-9092fe7c] .show .el-form-item__content{flex-direction:column;align-items:start}\n/*$vite$:1*/",document.head.appendChild(l);const L={class:"bg-fff pd-20 radius-6"},S={class:"flex w-full"},B={class:"flex w-full"},E={class:"flex w-full"},I=["href"],M={class:"flex w-full"},O={class:"f-15"},R=["innerHTML"];e("default",y({__name:"add",setup(e){const l=v(null),y=v("list"),A=v([]),K={checkStrictly:!0},P=v([]),Q=j({taskName:"",targetUrl:"",listTag:"",startNum:1,endNum:1,increment:1,pages:[],titleTag:"",articleTag:"",charset:"1",parseData:"return data;",status:"1",cid:1}),W=v([]),F=j({}),G=e=>{-1!==e[0]&&(Q.cid=e[e.length-1])},J=async()=>{try{let{targetUrl:e,listTag:l,charset:a}=Q,t=await p({targetUrl:e,listTag:l,charset:a});if(200===t.code){let l=t.data;const a=/^(.*:\/\/[^\/]+).*$/,s=e.match(a),r=s?s[1]:"";l[0].includes("http")||(l=l.map(e=>`${r}${e}`)),Q.pages=l,g({message:"列表地址获取成功^_^",type:"success"})}}catch(e){console.log(e)}},X=async()=>{try{let{targetUrl:e,startNum:l,endNum:a,increment:t}=Q,s=[];for(let r=l;r<=a;r+=t){let l=e.replace("${page}",r);s.push(l)}W.value=s,await Promise.all(W.value.map(async(e,l)=>{let{listTag:a,charset:t}=Q;if(l>0){let l=await p({targetUrl:e,listTag:a,charset:t});200===l.code&&(Q.pages=[...Q.pages,...l.data])}}))}catch(e){console.log(e)}},Y=async()=>{try{let{titleTag:e,articleTag:l,parseData:a,charset:t}=Q,s=Q.pages[0]||"",r=await f({taskUrl:s,titleTag:e,articleTag:l,parseData:a,charset:t});200===r.code&&(F.title=r.data.title,F.article=r.data.article,g({message:"内容获取成功^_^",type:"success"}))}catch(e){console.log(e)}},Z=e=>{e.validate((e,l)=>{if(!e)return b(l),!1;(async()=>{try{let e={...Q};e.pages=Q.pages.join(",");let l=await _(e);200===l.code?(g({message:"新增成功^_^",type:"success"}),ee()):g({message:l.msg,type:"error"})}catch(e){console.log(e)}})()})},ee=()=>{window.history.back()};return T(()=>{(async()=>{try{let e=await m();if(200===e.code){let l=h(V(e.data));P.value=[...l]}}catch(e){console.log(e)}})()}),(e,g)=>{const m=r,p=s,f=c,_=u,h=d,V=t,b=n,v=o,j=a,T=i;return k(),U("div",L,[w(T,{ref_key:"formRef",ref:l,model:Q,"label-width":"84px"},{default:x(()=>[w(j,{modelValue:y.value,"onUpdate:modelValue":g[13]||(g[13]=e=>y.value=e),class:"demo-tabs"},{default:x(()=>[w(V,{label:"列表测试",name:"list"},{default:x(()=>[w(p,{label:"任务名称",prop:"taskName",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"}]},{default:x(()=>[w(m,{modelValue:Q.taskName,"onUpdate:modelValue":g[0]||(g[0]=e=>Q.taskName=e),placeholder:"例：前端库-chat问答"},null,8,["modelValue"])]),_:1}),w(p,{label:"列表网址",prop:"targetUrl",rules:[{required:!0,message:"请输入匹配网址",trigger:"blur"}]},{default:x(()=>[C("div",S,[w(m,{class:"flex-1",modelValue:Q.targetUrl,"onUpdate:modelValue":g[1]||(g[1]=e=>Q.targetUrl=e),placeholder:"/SEO/1_${page}.html"},null,8,["modelValue"])])]),_:1}),w(p,{label:"字符集",prop:"charset",rules:[{required:!0,message:"请选择字符集",trigger:"blur"}]},{default:x(()=>[w(_,{modelValue:Q.charset,"onUpdate:modelValue":g[2]||(g[2]=e=>Q.charset=e),class:"ml-4"},{default:x(()=>[w(f,{value:"1",size:"large"},{default:x(()=>g[14]||(g[14]=[$("uft-8",-1)])),_:1,__:[14]}),w(f,{value:"2",size:"large"},{default:x(()=>g[15]||(g[15]=[$("gb2312",-1)])),_:1,__:[15]})]),_:1},8,["modelValue"])]),_:1}),w(p,{label:"列表链接",prop:"listTag",rules:[{required:!0,message:"请输入文章列表标签",trigger:"blur"}]},{default:x(()=>[C("div",B,[w(m,{class:"flex-1",modelValue:Q.listTag,"onUpdate:modelValue":g[3]||(g[3]=e=>Q.listTag=e),placeholder:"例：.content h4 a"},null,8,["modelValue"]),w(h,{class:"ml-5",type:"primary",onClick:J},{default:x(()=>g[16]||(g[16]=[$(" 测试 ",-1)])),_:1,__:[16]})])]),_:1}),w(p,{label:"开始页面"},{default:x(()=>[C("div",E,[w(m,{class:"flex-1",modelValue:Q.startNum,"onUpdate:modelValue":g[4]||(g[4]=e=>Q.startNum=e)},null,8,["modelValue"]),g[18]||(g[18]=C("span",{class:"ml-5 mr-5"},"至",-1)),w(m,{class:"flex-1",modelValue:Q.endNum,"onUpdate:modelValue":g[5]||(g[5]=e=>Q.endNum=e)},null,8,["modelValue"]),g[19]||(g[19]=C("span",{class:"ml-5 mr-5"},"每页递增",-1)),w(m,{class:"flex-1 mr-5",modelValue:Q.increment,"onUpdate:modelValue":g[6]||(g[6]=e=>Q.increment=e)},null,8,["modelValue"]),w(h,{type:"primary",onClick:X},{default:x(()=>g[17]||(g[17]=[$("测试",-1)])),_:1,__:[17]})])]),_:1}),W.value.length>0?(k(),N(p,{key:0,label:"列表地址"},{default:x(()=>[(k(!0),U(z,null,D(W.value,(e,l)=>(k(),U("p",{class:"mr-30",key:l},H(e),1))),128))]),_:1})):q("",!0),Q.pages.length>0?(k(),N(p,{key:1,label:"文章地址"},{default:x(()=>[(k(!0),U(z,null,D(Q.pages,(e,l)=>(k(),U("p",{class:"mr-30",key:l},H(e),1))),128))]),_:1})):q("",!0)]),_:1}),w(V,{label:"内容测试",name:"article"},{default:x(()=>[w(p,{label:"目标地址"},{default:x(()=>[C("a",{class:"mr-10",href:Q.pages[0],target:"_blank"},H(Q.pages[0]),9,I),g[20]||(g[20]=$("（默认第一个作为测试） ",-1))]),_:1,__:[20]}),w(p,{label:"文章标题",prop:"titleTag",rules:[{required:!0,message:"请输入文章标题",trigger:"blur"}]},{default:x(()=>[w(m,{class:"flex-1",placeholder:"例：.title",modelValue:Q.titleTag,"onUpdate:modelValue":g[7]||(g[7]=e=>Q.titleTag=e)},null,8,["modelValue"])]),_:1}),w(p,{label:"文章内容",prop:"articleTag",rules:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},{default:x(()=>[w(m,{placeholder:"例：.article",modelValue:Q.articleTag,"onUpdate:modelValue":g[8]||(g[8]=e=>Q.articleTag=e)},null,8,["modelValue"])]),_:1}),w(p,{label:"处理函数",prop:"parseData",rules:[{required:!0,message:"如果无特殊处理，请直接填写 return data;",trigger:"blur"}]},{default:x(()=>[C("div",M,[w(m,{class:"flex-1",type:"textarea",rows:13,modelValue:Q.parseData,"onUpdate:modelValue":g[9]||(g[9]=e=>Q.parseData=e),placeholder:"如果不做任何处理，直接返回data。拿到的文本是变量是data,可以直接js函数可以处理成需要的数据，最终需要返回data。例：\n            data = data.replaceAll('<BR>','<br/>');\n            return data;\n            //或\n            return data;\n            "},null,8,["modelValue"]),w(h,{class:"ml-5",type:"primary",onClick:Y},{default:x(()=>g[21]||(g[21]=[$(" 测试 ",-1)])),_:1,__:[21]})])]),_:1}),F.title?(k(),N(p,{key:0,label:"采集结果"},{default:x(()=>[w(b,{class:"w-full",shadow:"never"},{header:x(()=>[C("p",O,[g[22]||(g[22]=C("span",{class:"c-999"},"标题：",-1)),$(H(F.title),1)])]),default:x(()=>[g[23]||(g[23]=C("p",{class:"f-15"},[C("span",{class:"c-999"},"内容：")],-1)),C("div",{class:"f-15 article",innerHTML:F.article},null,8,R)]),_:1,__:[23]})]),_:1})):q("",!0)]),_:1}),w(V,{label:"保存配置",name:"save"},{default:x(()=>[w(p,{label:"保存栏目",prop:"articleTag",rules:[{required:!0,message:"请输入保存栏目",trigger:"blur"}]},{default:x(()=>[w(v,{props:K,"show-all-levels":!1,modelValue:A.value,"onUpdate:modelValue":g[10]||(g[10]=e=>A.value=e),options:P.value,onChange:G},null,8,["modelValue","options"])]),_:1}),w(p,{label:"发布状态",prop:"status",rules:[{required:!0,message:"请选择字符集",trigger:"blur"}]},{default:x(()=>[w(_,{modelValue:Q.status,"onUpdate:modelValue":g[11]||(g[11]=e=>Q.status=e),class:"ml-4"},{default:x(()=>[w(f,{value:"1",size:"large"},{default:x(()=>g[24]||(g[24]=[$("草稿",-1)])),_:1,__:[24]}),w(f,{value:"2",size:"large"},{default:x(()=>g[25]||(g[25]=[$("发布",-1)])),_:1,__:[25]})]),_:1},8,["modelValue"])]),_:1}),w(p,null,{default:x(()=>[w(h,{type:"primary",onClick:g[12]||(g[12]=e=>Z(l.value))},{default:x(()=>g[26]||(g[26]=[$("保存",-1)])),_:1,__:[26]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])])}}},[["__scopeId","data-v-9092fe7c"]]))}}});
