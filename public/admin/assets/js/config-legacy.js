System.register(["./element-plus-legacy.js","./index-legacy.js","./@vue-legacy.js"],function(e,a){"use strict";var l,t,o,s,u,d,n,c,r,i,m,f,p,y,g,_,b,v,h,w,A,V,S,j;return{setters:[e=>{l=e.a,t=e.q,o=e.r,s=e.L,u=e.M,d=e.B,n=e.C,c=e.g,r=e.n},e=>{i=e.h,m=e.A},e=>{f=e.V,p=e.r,y=e.n,g=e.aq,_=e.c,b=e.o,v=e.U,h=e.K,w=e.H,A=e.aa,V=e.J,S=e.a2,j=e.R}],execute:function(){let a=e("g",()=>i({url:`${m.BASE_API}/cms/site/info`,method:"get"})),W=e("u",e=>i({url:`${m.BASE_API}/cms/site/update`,method:"post",data:e}));const B={class:"mr-10 ml-10"},E=e("_",{__name:"config",setup(e){const E=f({loading:!0,folderList:[],set:{id:0,template:"default",uploadWay:"1"}}),L=p(null);async function P(){try{const e=await a();if(200===e.code){const{id:a,template:l,uploadWay:t}=e.data;E.loading=!1,E.set={id:a,template:l,uploadWay:t}}else l({message:e.msg,type:"error"})}catch(e){console.log(e)}}function k(){L.value.validate(async e=>{if(!e)return console.log("error submit!!"),!1;await async function(){try{const e=await W(E.set);200===e.code?(l({message:"更新成功^_^",type:"success"}),await P()):l({message:e.msg,type:"error"})}catch(e){console.log(e)}}()})}return y(async()=>{await P(),await async function(){try{const e=await i({url:`${m.BASE_API}/cms/sysApp/folder`,method:"get"});200===e.code&&e.data.forEach(e=>{E.folderList.push({label:e,value:e})})}catch(e){console.log(e)}}()}),(e,a)=>{const l=u,i=s,m=o,f=n,p=d,y=c,W=t,P=r,x=g("permission-disabled");return b(),_("div",B,[v(P,{label:"应用配置",class:"mt-20",name:"config"},{default:h(()=>[v(W,{ref_key:"setFormRef",ref:L,model:E.set,"label-width":"120px"},{default:h(()=>[v(m,{prop:"template",label:"模板"},{default:h(()=>[v(i,{modelValue:E.set.template,"onUpdate:modelValue":a[0]||(a[0]=e=>E.set.template=e),placeholder:"请选择模板"},{default:h(()=>[(b(!0),_(w,null,A(E.folderList,(e,a)=>(b(),V(l,{key:a,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),v(m,{label:"上传方式"},{default:h(()=>[v(p,{modelValue:E.set.uploadWay,"onUpdate:modelValue":a[1]||(a[1]=e=>E.set.uploadWay=e),class:"ml-4"},{default:h(()=>[v(f,{value:"1"},{default:h(()=>[...a[2]||(a[2]=[S("普通",-1)])]),_:1}),v(f,{value:"2"},{default:h(()=>[...a[3]||(a[3]=[S("七牛云",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),v(m,null,{default:h(()=>[j((b(),V(y,{type:"primary",onClick:k},{default:h(()=>[...a[4]||(a[4]=[S("保存",-1)])]),_:1})),[[x,["editor","admin","super"]]])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),L=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));e("c",L)}}});
