import{r as j,s as H,g as J,q as K,I as O,v as z,x as A,a as h}from"./element-plus.js";import{I as G,v as P,H as Q,F as W}from"./@element-plus.js";import{s as X,b as Y,d as Z}from"./category.js";import{_ as ee,t as oe,a as te}from"./index.js";import{u as ae}from"./vue-router.js";import{V as se,r as p,n as re,ai as le,aq as x,c as n,o as r,a as k,U as o,K as s,u as m,a2 as u,R as _,J as E,O as V}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const ne={class:"bg-fff radius-6 pd-20 mb-10"},ie={class:"bg-fff radius-6 pd-20"},de={class:"flex justify-end"},ce={key:0},pe={key:1},me={key:0},ue={key:1},_e={key:0},fe={key:1},ye={__name:"index",setup(he){const d=se({keywords:""}),w=p(!0),f=p([]),$=p(null),B=p([]),I=ae(),v=()=>{d.keywords="",f.value=[],B.value=[],y()},y=async()=>{try{const t=d.keywords,e=await X(t);if(e.code===200){const c=oe(e.data);f.value=te(c),w.value=!1}}catch(t){console.log(t)}},D=t=>{const e=t.id;I.push({name:"category-edit",params:{id:e}})},T=async t=>{try{const e=await Y(t);if(e.code===200)return e.data.length>0}catch(e){console.log(e)}return!1},R=async t=>{try{const e=await Z(t);e.code===200?(h({message:"删除成功 ^_^",type:"success"}),v()):h({message:e.msg,type:"error"})}catch(e){console.log(e)}},S=t=>{let e;t.type===0?e="".concat(location.origin).concat(t.path,"/index.html"):e="".concat(location.origin).concat(t.path,"/page.html"),window.open(e)},q=async t=>{const e=t.id;if(await T(e)){h({message:"我下面还有栏目啊 ^_^",type:"warning"});return}R(e)};return re(()=>{y()}),(t,e)=>{const c=H,b=j,i=J,F=K,N=le("router-link"),l=z,L=A,M=x("permission"),g=x("permission-disabled"),U=O;return r(),n("div",null,[k("div",ne,[o(F,{inline:!0,model:d},{default:s(()=>[o(b,{label:"名称",prop:"keywords"},{default:s(()=>[o(c,{placeholder:"请输入栏目名称","suffix-icon":m(G),modelValue:d.keywords,"onUpdate:modelValue":e[0]||(e[0]=a=>d.keywords=a),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),o(b,null,{default:s(()=>[o(i,{type:"primary",onClick:y,round:""},{default:s(()=>[...e[1]||(e[1]=[u("搜索",-1)])]),_:1}),o(i,{onClick:v,round:""},{default:s(()=>[...e[2]||(e[2]=[u("清空",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),k("div",ie,[k("div",de,[_((r(),E(N,{to:"/category/add"},{default:s(()=>[o(i,{type:"primary",round:""},{default:s(()=>[...e[3]||(e[3]=[u("新增",-1)])]),_:1})]),_:1})),[[M,["editor","admin","super"]]])]),_((r(),E(L,{ref_key:"multipleTableRef",ref:$,data:f.value,"tooltip-effect":"dark","row-key":"name","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:s(()=>[o(l,{prop:"name",label:"栏目名称",width:"140"}),o(l,{prop:"id",align:"center",label:"编号"}),o(l,{prop:"type",label:"类型",width:"80"},{default:s(a=>[a.row.type==0?(r(),n("p",ce,"栏目")):(r(),n("p",pe,"单页"))]),_:1}),o(l,{prop:"model",label:"模型",width:"80"},{default:s(a=>[a.row.model?(r(),n("p",me,V(a.row.model),1)):(r(),n("p",ue,"文章"))]),_:1}),o(l,{prop:"orderBy",align:"center",label:"排序"},{default:s(a=>[u(V(a.row.orderBy),1)]),_:1}),o(l,{prop:"status",label:"状态"},{default:s(a=>[a.row.status==0?(r(),n("p",_e,"显示")):(r(),n("p",fe,"隐藏"))]),_:1}),o(l,{fixed:"right",label:"操作",width:"160"},{default:s(a=>[o(i,{icon:m(P),circle:"",onClick:C=>S(a.row)},null,8,["icon","onClick"]),_(o(i,{icon:m(Q),circle:"",onClick:C=>D(a.row)},null,8,["icon","onClick"]),[[g,["editor","admin","super"]]]),_(o(i,{icon:m(W),circle:"",onClick:C=>q(a.row)},null,8,["icon","onClick"]),[[g,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"])),[[U,w.value]])])])}}},je=ee(ye,[["__scopeId","data-v-ca4e7d67"]]);export{je as default};
