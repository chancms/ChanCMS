import{r as L,s as N,g as R,q as j,I as q,v as M,x as H,a as y}from"./element-plus.js";import{I as K,v as O,H as Q,F as U}from"./@element-plus.js";import{s as W,b as z,d as A}from"./category.js";import{_ as G,t as J,a as P}from"./index.js";import{u as X}from"./vue-router.js";import{W as Y,r as p,n as Z,aj as ee,c,o as n,a as h,O as t,L as a,u,a3 as _,T as te,K as oe,Q as ae}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const le={class:"bg-fff radius-6 pd-20 mb-10"},se={class:"bg-fff radius-6 pd-20"},re={class:"flex justify-end"},ne={key:0},ie={key:1},ce={key:0},de={key:1},pe={__name:"index",setup(ue){const i=Y({keywords:""}),k=p(!0),m=p([]),v=p(null),C=p([]),x=X(),w=()=>{i.keywords="",m.value=[],C.value=[],f()},f=async()=>{try{const o=i.keywords,e=await W(o);if(e.code===200){const d=J(e.data);m.value=P(d),k.value=!1}}catch(o){console.log(o)}},E=o=>{const e=o.id;x.push({name:"category-edit",params:{id:e}})},$=async o=>{try{const e=await z(o);if(e.code===200)return e.data.length>0}catch(e){console.log(e)}return!1},B=async o=>{try{const e=await A(o);e.code===200?(y({message:"删除成功 ^_^",type:"success"}),w()):y({message:e.msg,type:"error"})}catch(e){console.log(e)}},V=o=>{let e;o.type===0?e="".concat(location.origin).concat(o.path,"/index.html"):e="".concat(location.origin).concat(o.path,"/page.html"),window.open(e)},I=async o=>{const e=o.id;if(await $(e)){y({message:"我下面还有栏目啊 ^_^",type:"warning"});return}B(e)};return Z(()=>{f()}),(o,e)=>{const d=N,g=L,s=R,T=j,D=ee("router-link"),r=M,S=H,F=q;return n(),c("div",null,[h("div",le,[t(T,{inline:!0,model:i},{default:a(()=>[t(g,{label:"名称",prop:"keywords"},{default:a(()=>[t(d,{placeholder:"请输入栏目名称","suffix-icon":u(K),modelValue:i.keywords,"onUpdate:modelValue":e[0]||(e[0]=l=>i.keywords=l),clearable:""},null,8,["suffix-icon","modelValue"])]),_:1}),t(g,null,{default:a(()=>[t(s,{type:"primary",onClick:f,round:""},{default:a(()=>e[1]||(e[1]=[_("搜索",-1)])),_:1,__:[1]}),t(s,{onClick:w,round:""},{default:a(()=>e[2]||(e[2]=[_("清空",-1)])),_:1,__:[2]})]),_:1})]),_:1},8,["model"])]),h("div",se,[h("div",re,[t(D,{to:"/category/add"},{default:a(()=>[t(s,{type:"primary",round:""},{default:a(()=>e[3]||(e[3]=[_("新增",-1)])),_:1,__:[3]})]),_:1})]),te((n(),oe(S,{ref_key:"multipleTableRef",ref:v,data:m.value,"tooltip-effect":"dark","row-key":"name","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:a(()=>[t(r,{prop:"name",label:"栏目名称",width:"140"}),t(r,{prop:"id",align:"center",label:"编号"}),t(r,{prop:"type",label:"类型",width:"80"},{default:a(l=>[l.row.type==0?(n(),c("p",ne,"栏目")):(n(),c("p",ie,"单页"))]),_:1}),t(r,{prop:"orderBy",align:"center",label:"排序"},{default:a(l=>[_(ae(l.row.orderBy),1)]),_:1}),t(r,{prop:"status",label:"状态"},{default:a(l=>[l.row.status==0?(n(),c("p",ce,"显示")):(n(),c("p",de,"隐藏"))]),_:1}),t(r,{fixed:"right",label:"操作",width:"160"},{default:a(l=>[t(s,{icon:u(O),circle:"",onClick:b=>V(l.row)},null,8,["icon","onClick"]),t(s,{icon:u(Q),circle:"",onClick:b=>E(l.row)},null,8,["icon","onClick"]),t(s,{icon:u(U),circle:"",onClick:b=>I(l.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[F,k.value]])])])}}},Fe=G(pe,[["__scopeId","data-v-fd845c60"]]);export{Fe as default};
