import{g as j,u as D,v as N,T as S,U as V,x as H,y as M,a as c}from"./element-plus.js";import{u as P}from"./vue-router.js";import{H as R,F as $}from"./@element-plus.js";import{l as z,a as F}from"./slide.js";import{r as s,n as I,aj as K,c as L,o as f,O as e,L as o,a3 as O,K as q,H as A,u as g}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./index.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const G={class:"pd-20 bg-fff radius-6"},fe={__name:"index",setup(J){const y=P(),p=s([]),h=s([]),m=s(0),u=s(1),i=async()=>{try{const t=await z(u.value);t.code===200?(p.value=[...t.data.list],m.value=t.data.count):c({message:t.msg,type:"error"})}catch(t){console.log(t)}},v=t=>{u.value=t,i()},b=t=>{h.value=t},k=t=>{const a=t.id;y.push({name:"slide-edit",params:{id:a}})},w=async t=>{const a=t.id;try{const l=await F(a);l.code===200?(c({message:"删除成功 ^_^",type:"success"}),i()):c({message:l.msg,type:"error"})}catch(l){console.log(l)}},C=s(null);return I(()=>{i()}),(t,a)=>{const l=j,x=K("router-link"),d=D,n=N,_=V,E=S,T=H,U=M;return f(),L("div",G,[e(d,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:o(()=>[e(x,{to:"/slide/add"},{default:o(()=>[e(l,{type:"primary",round:""},{default:o(()=>a[0]||(a[0]=[O("新增",-1)])),_:1,__:[0]})]),_:1})]),_:1}),e(T,{ref_key:"multipleTable",ref:C,data:p.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:b},{default:o(()=>[e(n,{type:"selection"}),e(n,{prop:"id",label:"编号"}),e(n,{prop:"title",label:"标题"}),e(n,{prop:"imgUrl",label:"图片链接"},{default:o(r=>[r.row.imgUrl?(f(),q(E,{key:0,placement:"right",width:600,trigger:"hover"},{reference:o(()=>[e(_,{class:"avatar-uploader-icon pointer ml-10",src:r.row.imgUrl},null,8,["src"])]),default:o(()=>[e(_,{style:{width:"100%"},src:r.row.imgUrl},null,8,["src"])]),_:2},1024)):A("",!0)]),_:1}),e(n,{prop:"linkUrl",label:"跳转链接"}),e(n,{fixed:"right",width:"100",label:"操作"},{default:o(r=>[e(l,{icon:g(R),circle:"",onClick:B=>k(r.row)},null,8,["icon","onClick"]),e(l,{icon:g($),circle:"",onClick:B=>w(r.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),e(d,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:o(()=>[e(U,{background:"",layout:"prev, pager, next",onCurrentChange:v,"page-size":10,total:m.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}};export{fe as default};
