import{g as j,u as M,v as P,T as $,U as q,x as z,y as F,a as c}from"./element-plus.js";import{u as G}from"./vue-router.js";import{H,F as I}from"./@element-plus.js";import{l as J,a as K}from"./slide.js";import{r as i,n as A,ai as L,aq as h,c as O,o as p,U as t,K as o,R as m,J as y,a2 as Q,G as W,u as b}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./index.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const X={class:"pd-20 bg-fff radius-6"},ke={__name:"index",setup(Y){const k=G(),d=i([]),w=i([]),u=i(0),_=i(1),s=async()=>{try{const e=await J(_.value);e.code===200?(d.value=[...e.data.list],u.value=e.data.count):c({message:e.msg,type:"error"})}catch(e){console.log(e)}},C=e=>{_.value=e,s()},x=e=>{w.value=e},E=e=>{const r=e.id;k.push({name:"slide-edit",params:{id:r}})},U=async e=>{const r=e.id;try{const a=await K(r);a.code===200?(c({message:"删除成功 ^_^",type:"success"}),s()):c({message:a.msg,type:"error"})}catch(a){console.log(a)}},T=i(null);return A(()=>{s()}),(e,r)=>{const a=j,D=L("router-link"),f=M,l=P,g=q,B=$,N=z,R=F,S=h("permission"),v=h("permission-disabled");return p(),O("div",X,[t(f,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:o(()=>[m((p(),y(D,{to:"/slide/add"},{default:o(()=>[t(a,{type:"primary",round:""},{default:o(()=>[...r[0]||(r[0]=[Q("新增",-1)])]),_:1})]),_:1})),[[S,["editor","admin","super"]]])]),_:1}),t(N,{ref_key:"multipleTable",ref:T,data:d.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:x},{default:o(()=>[t(l,{type:"selection"}),t(l,{prop:"id",label:"编号"}),t(l,{prop:"title",label:"标题"}),t(l,{prop:"imgUrl",label:"图片链接"},{default:o(n=>[n.row.imgUrl?(p(),y(B,{key:0,placement:"right",width:600,trigger:"hover"},{reference:o(()=>[t(g,{class:"avatar-uploader-icon pointer ml-10",src:n.row.imgUrl},null,8,["src"])]),default:o(()=>[t(g,{style:{width:"100%"},src:n.row.imgUrl},null,8,["src"])]),_:2},1024)):W("",!0)]),_:1}),t(l,{prop:"linkUrl",label:"跳转链接"}),t(l,{fixed:"right",width:"100",label:"操作"},{default:o(n=>[m(t(a,{icon:b(H),circle:"",onClick:V=>E(n.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]]),m(t(a,{icon:b(I),circle:"",onClick:V=>U(n.row)},null,8,["icon","onClick"]),[[v,["editor","admin","super"]]])]),_:1})]),_:1},8,["data"]),t(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:o(()=>[t(R,{background:"",layout:"prev, pager, next",onCurrentChange:C,"page-size":10,total:u.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}};export{ke as default};
