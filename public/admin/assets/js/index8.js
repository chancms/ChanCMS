import{g as T,u as U,v as F,F as q,w as A,b as M,x as P,y as R,a as j}from"./element-plus.js";import{H as z,F as G,B as H}from"./@element-plus.js";import{l as I,D as J,r as K}from"./dialog5.js";import{g as O}from"./index.js";import{r as m,V as $,w as L,n as Q,aq as W,c as X,o as p,U as t,a as Y,K as l,R as u,J as g,a2 as v,O as Z,G as ee,u as s}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";import"./@fingerprintjs.js";import"./tslib.js";/* empty css     */const te={class:"bg-fff radius-6 pd-20"},oe={class:"mr-10 ml-10"},Be={__name:"index",setup(ae){const h=m([]),_=m(0),f=m(1),b=O("username"),o=$({dialogVisible:!1,id:0,params:{},list:[]});L(()=>o.dialogVisible,e=>{e||r()});const r=async()=>{try{const e=await I();e.code===200&&(o.list=[...e.data.list],_.value=e.data.total)}catch(e){console.log(e)}},w=e=>{f.value=e,r()},y=e=>{h.value=e},C=e=>{o.id=e.id,o.dialogVisible=!0},E=()=>{o.id=0,o.dialogVisible=!0},V=async e=>{try{const{id:a}=e;(await K({id:a})).code===200&&(j.success("删除成功 ^_^"),r())}catch(a){console.log(a)}};return Q(()=>{r()}),(e,a)=>{const c=T,k=U,n=F,x=q,B=M,D=A,N=P,S=R,d=W("permission-disabled");return p(),X("div",te,[t(k,{type:"flex",justify:"end"},{default:l(()=>[u((p(),g(c,{type:"primary",onClick:E,round:""},{default:l(()=>[...a[1]||(a[1]=[v("新增",-1)])]),_:1})),[[d,["editor","admin","super"]]])]),_:1}),Y("div",oe,[t(N,{data:o.list,"tooltip-effect":"dark","row-key":"id",onSelectionChange:y},{default:l(()=>[t(n,{prop:"id",width:"100",label:"编号"}),t(n,{prop:"username",label:"管理员"}),t(n,{prop:"role_name",label:"角色"}),t(n,{prop:"status",label:"状态"},{default:l(i=>[v(Z(i.row.status==1?"启用":"关闭"),1)]),_:1}),t(n,{fixed:"right",width:"200",label:"操作"},{default:l(i=>[u(t(c,{icon:s(z),circle:"",onClick:ie=>C(i.row)},null,8,["icon","onClick"]),[[d,["editor","admin","super"]]]),t(x,{width:"220",onConfirm:()=>V(i.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"你确定吗？要删管理员？"},{reference:l(()=>[u(t(c,{icon:s(G),disabled:s(b)===i.row.username,circle:""},null,8,["icon","disabled"]),[[d,["editor","admin","super"]]])]),_:2},1032,["onConfirm"]),s(b)===i.row.username?(p(),g(D,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:l(()=>[t(B,{class:"ml-10 t-4 pointer"},{default:l(()=>[t(s(H),{class:"c-165dff"})]),_:1})]),_:1})):ee("",!0)]),_:1})]),_:1},8,["data"]),t(S,{background:"",layout:"prev, pager, next",total:_.value,"page-size":10,"model-value":f.value,"onUpdate:modelValue":w,"hide-on-single-page":""},null,8,["total","model-value"])]),t(J,{visible:o.dialogVisible,"onUpdate:visible":a[0]||(a[0]=i=>o.dialogVisible=i),id:o.id},null,8,["visible","id"])])}}};export{Be as default};
