import{g as D,u as N,v as S,F as T,w as F,b as U,x as A,y as H,a as M}from"./element-plus.js";import{H as P,F as j,B as q}from"./@element-plus.js";import{l as z,D as I,r as K}from"./dialog5.js";import{g as L}from"./index.js";import{r as d,W as O,w as Q,n as R,c as W,o as _,O as t,a as $,L as n,a3 as f,Q as G,K as J,H as X,u as s}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const Y={class:"bg-fff radius-6 pd-20"},Z={class:"mr-10 ml-10"},Ce={__name:"index",setup(ee){const g=d([]),m=d(0),p=d(1),u=L("username"),o=O({dialogVisible:!1,id:0,params:{},list:[]});Q(()=>o.dialogVisible,e=>{e||r()});const r=async()=>{try{const e=await z();e.code===200&&(o.list=[...e.data.list],m.value=e.data.total)}catch(e){console.log(e)}},b=e=>{p.value=e,r()},h=e=>{g.value=e},v=e=>{o.id=e.id,o.dialogVisible=!0},w=()=>{o.id=0,o.dialogVisible=!0},y=async e=>{try{const{id:a}=e;(await K({id:a})).code===200&&(M.success("删除成功 ^_^"),r())}catch(a){console.log(a)}};return R(()=>{r()}),(e,a)=>{const c=D,C=N,i=S,E=T,k=U,x=F,V=A,B=H;return _(),W("div",Y,[t(C,{type:"flex",justify:"end"},{default:n(()=>[t(c,{type:"primary",onClick:w,round:""},{default:n(()=>a[1]||(a[1]=[f("新增",-1)])),_:1,__:[1]})]),_:1}),$("div",Z,[t(V,{data:o.list,"tooltip-effect":"dark","row-key":"id",onSelectionChange:h},{default:n(()=>[t(i,{prop:"id",width:"100",label:"编号"}),t(i,{prop:"username",label:"管理员"}),t(i,{prop:"role_name",label:"角色"}),t(i,{prop:"status",label:"状态"},{default:n(l=>[f(G(l.row.status==1?"启用":"关闭"),1)]),_:1}),t(i,{fixed:"right",width:"200",label:"操作"},{default:n(l=>[t(c,{icon:s(P),circle:"",onClick:te=>v(l.row)},null,8,["icon","onClick"]),t(E,{width:"220",onConfirm:()=>y(l.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"你确定吗？要删管理员？"},{reference:n(()=>[t(c,{icon:s(j),disabled:s(u)===l.row.username,circle:""},null,8,["icon","disabled"])]),_:2},1032,["onConfirm"]),s(u)===l.row.username?(_(),J(x,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:n(()=>[t(k,{class:"ml-10 t-4 pointer"},{default:n(()=>[t(s(q),{class:"c-165dff"})]),_:1})]),_:1})):X("",!0)]),_:1})]),_:1},8,["data"]),t(B,{background:"",layout:"prev, pager, next",total:m.value,"page-size":10,"model-value":p.value,"onUpdate:modelValue":b,"hide-on-single-page":""},null,8,["total","model-value"])]),t(I,{visible:o.dialogVisible,"onUpdate:visible":a[0]||(a[0]=l=>o.dialogVisible=l),id:o.id},null,8,["visible","id"])])}}};export{Ce as default};
